# 地层数据文件格式规范

## 输入文件格式

### 1. 钻井数据文件 (如 CCQ_merged.csv)

**必需列:**
- `序号` - 记录序号
- `起始井深` - 起始深度数值
- `结束井深` - 结束深度数值  
- `起始地层` - 起始地层名称
- `结束地层` - 结束地层名称

**示例数据:**
```
序号,起始井深,结束井深,起始地层,结束地层,井号,型号,...
1,60.0,1001.0,沙二段,沙二段,大页1H1-1,NS519,...
2,1001.0,1006.0,沙二段,沙二段,大页1H1-1,NS516,...
```

### 2. 地层字典文件 (stratigraphic_depth_statistics.json)

**格式:** JSON对象，键为地层名称，值为地层详细信息

**地层信息结构:**
```json
{
  "地层名称": {
    "所属层位": "上级地层名称",
    "顶界所处位置（0~1）": "0.0-1.0之间的数值",
    "底界所处位置（0~1）": "0.0-1.0之间的数值"
  }
}
```

**示例:**
```json
{
  "沙二段": {
    "所属层位": "沙溪庙组",
    "顶界所处位置（0~1）": "0",
    "底界所处位置（0~1）": "0.5"
  },
  "凉上段": {
    "所属层位": "凉高山组", 
    "顶界所处位置（0~1）": "0",
    "底界所处位置（0~1）": "0.5"
  }
}
```

### 3. 地层分层文件 (地层分层.csv)

**必需列:**
- `序号` - 层位序号
- `地层信息` - 地层名称
- `地层顶深` - 地层顶部深度
- `地层底深` - 地层底部深度  
- `类别` - 地层分类标签

**示例数据:**
```
序号,地层信息,地层顶深,地层底深,类别
1,沙溪庙组,0,1668,沙溪庙
2,凉高山组,1668,1899,自流井
3,自流井组,1899,2240,自流井
```

## 输出文件格式

### 1. 处理后的钻井数据

包含原始数据补充信息：
- 地层所属层位
- 顶界/底界映射深度
- 预测地层与实际地层一致性
- 深度范围检查结果
- 调整后的深度值

### 2. 置信度分析结果

**列结构:**
- `序号` - 记录序号
- `类别` - 地层分类
- `置信度` - 0-1之间的置信度数值

### 3. 最终合并结果

合并置信度结果与原始钻井数据，包含完整信息。

## 数据验证规则

### 字典验证
- 所有钻井数据中的地层必须在字典中存在
- 地层的"所属层位"必须在地层分层文件中存在
- 位置值必须在0-1范围内
- 所有必需字段必须存在

### 深度验证
- 地层顶深必须小于底深
- 深度值必须为有效数值
- 井深必须在合理范围内

### 一致性验证
- 预测地层与实际地层的一致性检查
- 深度映射范围的合理性验证
